{
  "_DANGER": "⚠️  THIS CONFIG RUNS FULLY AUTONOMOUSLY WITHOUT HUMAN APPROVAL",
  "_WARNING": "Only use after extensive testing in supervised mode (configs/supervised_autopilot_example.json)",
  "_KILL_SWITCH": "Create state/KILL_SWITCH file to halt immediately",

  "symbols": ["AAPL", "MSFT"],

  "acquisition": {
    "sources": [
      {
        "name": "local_drop",
        "root": "data/provider",
        "symbols": ["AAPL", "MSFT"],
        "filename_template": "{symbol}.csv",
        "bar_interval_minutes": 1
      }
    ],
    "raw_lake_dir": "data/raw_lake",
    "ingestion": {
      "staging_dir": "data/staging",
      "curated_dir": "data/curated",
      "manifest_path": "state/ingestion/manifest.json",
      "archive_processed": "state/ingestion/archive"
    },
    "metadata_log_path": "state/acquisition/log.jsonl"
  },

  "training": {
    "lookback": 30,
    "horizon": 1,
    "learning_rate": 0.01,
    "epochs": 200,
    "model_path": "models/autopilot/model.json"
  },

  "calibration": {
    "safety_margin": 0.15,
    "output_path": "state/calibration/thresholds.json"
  },

  "engine": {
    "risk": {
      "max_position_fraction": 0.20,
      "per_symbol_notional_cap": 150000,
      "max_single_position_units": 1000000
    },
    "strategy": {
      "short_window": 8,
      "long_window": 21,
      "exit_window": 10
    }
  },

  "state_path": "state/autopilot/state.json",
  "bar_interval_minutes": 1,

  "promotion": {
    "registry_dir": "models/archive",
    "active_model_path": "models/active/model.json",
    "manifest_path": "state/promotion/manifest.json",
    "policy": {
      "_comment": "STRICT thresholds for autonomous promotion",
      "min_train_accuracy": 0.60,
      "min_test_accuracy": 0.58,
      "min_sharpe": 0.80,
      "max_drawdown": 0.15,
      "min_total_return": 0.05,
      "min_trades": 30
    }
  },

  "audit": {
    "log_path": "state/audit/log.jsonl",
    "state_root": "state/archive"
  },

  "supervision": {
    "_comment": "Minimal supervision config (alerting only, no approval gates)",
    "alert_dir": "state/alerts",
    "data_staleness_hours": 24,
    "notification_webhooks": {
      "_comment": "RECOMMENDED: Set up webhooks for critical alerts",
      "_slack_example": "https://hooks.slack.com/services/YOUR/WEBHOOK/URL",
      "_email_example": "https://your-email-service.com/webhook"
    }
  },

  "headless": {
    "_comment": "⚠️  HEADLESS MODE CONFIGURATION - AUTONOMOUS OPERATION",

    "enable_auto_promotion": true,
    "_promotion_note": "Automatically promote models that pass multi-stage validation",

    "enable_auto_risk_adjustment": true,
    "_risk_note": "Automatically adjust risk limits within hard ceilings based on performance",

    "enable_auto_recovery": true,
    "_recovery_note": "Automatically recover from failures (data ingestion, training errors, etc.)",

    "promotion_validation_stages": 5,
    "_validation_stages_note": "Number of validation checks before auto-promoting (more = safer). Checks: policy gates, consistency, overfitting, return/drawdown ratio, minimum trades",

    "max_risk_increase_pct": 0.03,
    "_risk_increase_note": "Maximum risk increase per adjustment (0.03 = 3%). Conservative: 0.01-0.03, Aggressive: 0.05-0.10",

    "min_risk_floor": 0.10,
    "_risk_floor_note": "Absolute minimum risk limit (never go below 10% position fraction)",

    "max_consecutive_failures": 3,
    "_failures_note": "Halt automation after N consecutive failures",

    "performance_monitoring_window_days": 7,
    "_monitoring_note": "Days to monitor for performance degradation",

    "auto_rollback_on_degradation": true,
    "_rollback_note": "Automatically rollback to previous model if live performance degrades",

    "degradation_threshold_pct": 0.10,
    "_degradation_note": "Performance drop % that triggers auto-rollback (0.10 = 10% degradation)",

    "kill_switch_check_url": null,
    "_kill_switch_url_note": "Optional URL to check for remote kill signal (null = file-based only)",

    "kill_switch_check_interval_seconds": 60,
    "_kill_switch_interval_note": "How often to check for kill switch (file: state/KILL_SWITCH or remote URL)",

    "external_health_report_url": null,
    "_health_report_url_note": "Optional URL to POST health reports for external monitoring",

    "health_report_interval_seconds": 300,
    "_health_report_interval_note": "How often to send health reports to external system (5 minutes = 300 seconds)"
  },

  "_usage": {
    "_DANGER": "⚠️  HEADLESS MODE RUNS AUTONOMOUSLY - ONLY USE AFTER EXTENSIVE TESTING",
    "_test_run": "python scripts/headless_autopilot.py configs/headless_autopilot_example.json --run-once",
    "_daemon_mode": "python scripts/headless_autopilot.py configs/headless_autopilot_example.json --daemon --interval-minutes 60",
    "_emergency_stop": "python scripts/headless_autopilot.py configs/headless_autopilot_example.json --kill",
    "_resume": "python scripts/headless_autopilot.py configs/headless_autopilot_example.json --unkill",
    "_or_manual_kill": "touch state/KILL_SWITCH (creates file to halt daemon)"
  },

  "_safety_checklist": {
    "_1": "✓ Tested in supervised mode for at least 2 weeks",
    "_2": "✓ Promotion policy thresholds validated (min_sharpe >= 0.80, max_drawdown <= 0.15)",
    "_3": "✓ Risk ceilings configured (max_position_fraction <= 0.30, hard-coded in aistock/headless.py)",
    "_4": "✓ External monitoring set up (webhooks, health reports)",
    "_5": "✓ Kill switch mechanism tested (both file-based and remote)",
    "_6": "✓ Paper trading validation passed for 30+ days",
    "_7": "✓ Rollback procedures tested",
    "_8": "✓ Started with small capital allocation (< 10% of total portfolio)",
    "_9": "✓ Monitoring alerts configured for WARNING, ERROR, CRITICAL",
    "_10": "✓ Operator available for emergency response (within 1 hour)"
  }
}
