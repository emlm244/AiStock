{
  "symbols": ["AAPL", "MSFT"],

  "acquisition": {
    "sources": [
      {
        "name": "local_drop",
        "root": "data/provider",
        "symbols": ["AAPL", "MSFT"],
        "filename_template": "{symbol}.csv",
        "bar_interval_minutes": 1
      }
    ],
    "raw_lake_dir": "data/raw_lake",
    "ingestion": {
      "staging_dir": "data/staging",
      "curated_dir": "data/curated",
      "manifest_path": "state/ingestion/manifest.json",
      "archive_processed": "state/ingestion/archive"
    },
    "metadata_log_path": "state/acquisition/log.jsonl"
  },

  "training": {
    "lookback": 30,
    "horizon": 1,
    "learning_rate": 0.01,
    "epochs": 200,
    "model_path": "models/autopilot/model.json"
  },

  "calibration": {
    "safety_margin": 0.15,
    "output_path": "state/calibration/thresholds.json"
  },

  "engine": {
    "risk": {
      "max_position_fraction": 0.25,
      "per_symbol_notional_cap": 200000,
      "max_single_position_units": 1000000
    },
    "strategy": {
      "short_window": 8,
      "long_window": 21,
      "exit_window": 10
    }
  },

  "state_path": "state/autopilot/state.json",
  "bar_interval_minutes": 1,

  "promotion": {
    "registry_dir": "models/archive",
    "active_model_path": "models/active/model.json",
    "manifest_path": "state/promotion/manifest.json",
    "policy": {
      "min_train_accuracy": 0.55,
      "min_test_accuracy": 0.53,
      "min_sharpe": 0.6,
      "max_drawdown": 0.2,
      "min_total_return": 0.02,
      "min_trades": 20
    }
  },

  "audit": {
    "log_path": "state/audit/log.jsonl",
    "state_root": "state/archive"
  },

  "supervision": {
    "_comment": "Supervision controls for human-in-the-loop automation",

    "auto_approve_training": true,
    "_training_note": "Set to true to automatically run ML training without approval",

    "auto_approve_promotion": false,
    "_promotion_note": "Set to false (RECOMMENDED) to require human approval for model promotion",

    "auto_approve_risk_changes": false,
    "_risk_note": "Set to false to require human approval for risk limit changes",

    "auto_approve_universe_changes": false,
    "_universe_note": "Set to false to require human approval when adding/removing symbols",

    "alert_dir": "state/alerts",
    "_alert_dir_note": "Directory for file-based alerts (organized by severity: info/warning/error/critical)",

    "pending_approvals_path": "state/alerts/pending_approvals.json",
    "_approvals_note": "JSON file tracking pending approval requests",

    "schedule_interval_minutes": 60,
    "_schedule_note": "Run autopilot every N minutes (null = manual only). Recommended: 60 for hourly, 1440 for daily",

    "health_check_interval_seconds": 300,
    "_health_check_note": "Health monitor check frequency (seconds). Recommended: 300 for 5-minute checks",

    "data_staleness_hours": 24,
    "_staleness_note": "Alert if no new data ingested in X hours. Recommended: 24 for daily data, 2 for intraday",

    "position_reconciliation_tolerance_pct": 1.0,
    "_reconciliation_note": "Alert if broker position differs from internal by > X%. Recommended: 1.0",

    "notification_webhooks": {
      "_comment": "Optional webhook URLs for external alerting (Slack, email, PagerDuty, etc.)",
      "_example_slack": "https://hooks.slack.com/services/YOUR/WEBHOOK/URL",
      "_example_custom": "https://your-alerting-service.com/webhook",
      "_note": "Webhooks are called for WARNING, ERROR, and CRITICAL alerts only (not INFO)"
    }
  },

  "_usage": {
    "_comment": "How to use this configuration",
    "_manual_run": "python scripts/supervised_autopilot.py configs/supervised_autopilot_example.json --run-once",
    "_scheduled_run": "python scripts/supervised_autopilot.py configs/supervised_autopilot_example.json --schedule",
    "_health_check": "python scripts/supervised_autopilot.py configs/supervised_autopilot_example.json --health-check",
    "_list_approvals": "python scripts/supervised_autopilot.py configs/supervised_autopilot_example.json --list-approvals",
    "_approve": "python scripts/supervised_autopilot.py configs/supervised_autopilot_example.json --approve <request_id> --operator alice",
    "_reject": "python scripts/supervised_autopilot.py configs/supervised_autopilot_example.json --reject <request_id> --notes 'reason' --operator alice"
  }
}
